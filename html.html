<!DOCTYPE html>
<html lang="en">
<head>
  <title>Jogo da Cobrinha</title>
</head>
<body>
  <canvas id="canvas" width="400" height="400"></canvas>
  <script>
    // Cria o elemento canvas
    const canvas = document.getElementById("canvas");

    // Cria a cobra
    const snake = {
      // Posição atual da cobra
      x: 100,
      y: 100,

      // Direcção atual da cobra
      direction: "direita",

      // Corpo da cobra
      body: [
        {x: 100, y: 100},
        {x: 90, y: 100},
        {x: 80, y: 100},
      ],
    };

    // Cria os elementos do site
    const elements = [
      document.querySelector(".element1"),
      document.querySelector(".element2"),
      document.querySelector(".element3"),
    ];

    // Desenha a cobra no canvas
    function drawSnake() {
      // Limpa o canvas
      canvas.getContext("2d").clearRect(0, 0, canvas.width, canvas.height);

      // Desenha o corpo da cobra
      for (const point of snake.body) {
        canvas.getContext("2d").fillStyle = "black";
        canvas.getContext("2d").fillRect(point.x, point.y, 10, 10);
      }
    }

    // Implementa a lógica do jogo
    function updateSnake() {
      // Move a cobra
      switch (snake.direction) {
        case "direita":
          snake.x++;
          break;
        case "esquerda":
          snake.x--;
          break;
        case "cima":
          snake.y--;
          break;
        case "baixo":
          snake.y++;
          break;
      }

      // Verifica se a cobra colidiu com a si mesma
      for (let i = 0; i < snake.body.length - 1; i++) {
        if (snake.body[i].x === snake.x && snake.body[i].y === snake.y) {
          // Game over!
          alert("Game over!");
          return;
        }
      }

      // Verifica se a cobra colidiu com um elemento do site
      for (const element of elements) {
        if (detectCollision(snake, element)) {
          // A cobra comeu um elemento!
          snake.body.push({x: snake.x, y: snake.y});
          element.remove();
        }
      }

      // Desenha a cobra novamente
      drawSnake();
    }

    // Inicia o jogo
    setInterval(updateSnake, 100);

    // Função para detectar colisões com elementos do site
    function detectCollision(snake, element) {
      // Obtém a posição da cobra
      const snakePosition = snake.body[0];

      // Obtém a área do elemento
      const elementRect = element.getBoundingClientRect();

      // Verifica se a cobra está dentro da área do elemento
      return snakePosition.x >= elementRect.left &&
        snakePosition.x <= elementRect.right &&
        snakePosition.y >= elementRect.top &&
        snakePosition.y <= elementRect.bottom;
    }
  </script>
</body>
</html>
